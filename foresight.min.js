(function(e,j,h,u){e.images=[];e.options=e.options||{};var g=e.options,v=g.minKbpsForHighBandwidth||300,n=g.speedTestUri||"http://foresightjs.appspot.com/speed-test/50K",w=g.speedTestKB||50,J=g.speedTestExpireMinutes||30,x=g.hiResClassname||"fs-high-resolution",y=g.lowResClassname||"fs-standard-resolution",K=/url\((?:([a-zA-Z-_0-9{}\?=&\\/.:\s]+)|([a-zA-Z-_0-9{}\?=&\\/.:\s]+)\|([a-zA-Z-_0-9{}\?=&\\/.:\s]+))\)/g,q,k,r=function(a,b){var c=h.createEvent("Event");c.initEvent("foresight-"+a,!0,!0);b.dispatchEvent(c)},
A=function(){var a,b,c;for(a=0;a<h.images.length;a++)if(b=h.images[a],!b.initalized&&(r("imageInitStart",b),b.initalized=!0,b.defaultSrc=l(b,"src"),b.widthUnits=l(b,"width",!0),b.heightUnits=l(b,"height",!0),c=l(b,"aspect-ratio",!1),b.aspectRatio="auto"===c?c:!isNaN(c)?parseInt(c,10):0,b.defaultSrc&&(b.widthUnits&&b.heightUnits||b.aspectRatio)))b.highResolutionSrc=l(b,"high-resolution-src"),b.orgClassName=b.className?b.className:"",c=t(b,"font-family","fontFamily").split("image-set("),b.imageSet=
[],1<c.length&&z(b,c[1]),b.onerror=L,r("imageInitEnd",b),e.images.push(b)},z=function(a,b){var c,e=b.split(","),d,i;for(c=0;c<e.length;c++){d={text:e[c],weight:0};-1<d.text.indexOf(" 1.5x")?(d.weight++,d.scale=1.5):-1<d.text.indexOf(" 2x")?d.scale=2:-1<d.text.indexOf(" 1x")&&(d.scale=1);for(-1<d.text.indexOf(" high-bandwidth")?d.bandwidth="high":-1<d.text.indexOf(" low-bandwidth")&&(d.bandwidth="low");i=K.exec(d.text);)null!=i[1]&&""!==i[1]?(d.uriTemplate=i[1],d.weight++):null!=i[2]&&""!==i[2]&&(d.uriFind=
i[2],d.uriReplace=i[3],d.weight++);d.scale&&d.bandwidth?d.weight+=2:(d.scale||d.bandwidth)&&d.weight++;a.imageSet.push(d)}a.imageSet.sort(M)},M=function(a,b){return a.weight<b.weight?1:a.weight>b.weight?-1:0},l=function(a,b,c,e){e=a.getAttribute("data-"+b);return c?!isNaN(e)?parseInt(e,10):0:e},s=function(){if("complete"===k&&"complete"===q){var a,b=e.images.length,c,f,d,i=[];for(a=0;a<b;a++)if(c=e.images[a],B(c)){r("imageRebuildStart",c);f=c.orgClassName.split(" ");d=c;var j=void 0;d.unitType||(j=
t(d,"width"),0<j.indexOf("%")?d.unitType="percent":(d.unitType="pixel",d.aspectRatio&&"auto"!=d.aspectRatio?d.widthUnits?(d.browserWidth=d.widthUnits,d.browserHeight=Math.round(d.widthUnits/d.aspectRatio)):d.heightUnits&&(d.browserWidth=Math.round(d[HEIGHT_UNTIS]/d.aspectRatio),d.browserHeight=d.heightUnits):(d.browserWidth=d.widthUnits,d.browserHeight=d.heightUnits)));if("percent"===d.unitType){var j=d,g;g=d;if(0!==g.offsetWidth)g=g.offsetWidth;else{var l=void 0,m=void 0,p={},n={position:"absolute",
visibility:"hidden",display:"block"};for(m in n)p[m]=g.style[m],g.style[m]=n[m];l=g.offsetWidth;for(m in n)g.style[m]=p[m];g=l}j.computedWidth=g;d.browserWidth=d.computedWidth;"auto"!=d.aspectRatio?d.browserHeight=Math.round(d.browserWidth/d.aspectRatio):d.heightUnits&&(d.browserHeight=Math.round(d.heightUnits*(d.computedWidth/d.widthUnits)));d.browserHeight&&-1<u.appVersion.indexOf("MSIE")&&(d.style.height=d.browserHeight+"px")}"pixel"==c.unitType&&(d="fs-"+c.browserWidth+"x"+c.browserHeight,f.push(d),
void 0==i[d]&&(i[d]=!0,i.push("."+d+"{width:"+c.browserWidth+"px;height:"+c.browserHeight+"px}")));"inline"!==c.style.display&&(c.style.display="inline");C(c);D(c);e.hiResEnabled&&c.src!==c.defaultSrc?f.push(x):f.push(y);f.push("fs-"+c.srcModification);c.className=f.join(" ");r("imageRebuildEnd",c)}if(i.length){a=void 0;o||(o=h.createElement("style"),o.setAttribute("type","text/css"));a=i.join("");try{o.innerText=a}catch(s){o.styleSheet.cssText=a}null==o.parentElement&&h.getElementsByTagName("head")[0].appendChild(o)}e.updateComplete&&
e.updateComplete();E=F()}},D=function(a){var b,c;1<a.appliedImageSetItem.scale&&"high"===a.appliedImageSetItem.bandwidth?(b=void 0===a.browserWidth?"auto":Math.round(a.browserWidth*a.appliedImageSetItem.scale),c=void 0===a.browserHeight?"auto":Math.round(a.browserHeight*a.appliedImageSetItem.scale),e.hiResEnabled=!0):(b=void 0===a.browserWidth?"auto":a.browserWidth,c=void 0===a.browserHeight?"auto":a.browserHeight,e.hiResEnabled=!1);!a.requestWidth||b>a.requestWidth?(a.requestWidth=b,a.requestHeight=
c,a.highResolutionSrc&&e.hiResEnabled?(a.src=a.highResolutionSrc,a.srcModification="src-hi-res"):a.src=G(a),a.requestChange=!0):a.requestChange=!1},G=function(a){if(a.appliedImageSetItem.uriTemplate){a.srcModification="src-uri-template";var b,c="src,protocol,host,port,directory,file,filename,ext,query,requestWidth,requestHeight,scale,scaleRounded".split(","),e=a.appliedImageSetItem.uriTemplate;a.uri=N(a.defaultSrc);a.uri.src=a.defaultSrc;a.uri.requestWidth=a.requestWidth;a.uri.requestHeight=a.requestHeight;
a.uri.scale=a.appliedImageSetItem.scale;a.uri.scaleRounded=a.appliedImageSetItem.scaleRounded;for(b=0;b<c.length;b++)e=e.replace("{"+c[b]+"}",a.uri[c[b]]);return e}if(a.appliedImageSetItem.uriFind&&a.appliedImageSetItem.uriReplace){a.srcModification="src-find-replace";b=a.appliedImageSetItem.uriFind.replace("{browserWidth}",a.widthUnits).replace("{browserHeight}",a.heightUnits);c=a.defaultSrc.replace(b,a.appliedImageSetItem.uriReplace);e=["requestWidth","requestHeight","scale","scaleRounded"];for(b=
0;b<e.length;b++)c=c.replace("{"+e[b]+"}",a[e[b]]);return c}a.srcModification="src-default";return a.defaultSrc},C=function(a){var b,c,f={};for(b=0;b<a.imageSet.length;b++)if(c=a.imageSet[b],c.scale&&c.bandwidth)if(e.devicePixelRatio==c.scale&&e.bandwidth===c.bandwidth){f=c;break}else{if(Math.round(e.devicePixelRatio)==c.scale&&e.bandwidth===c.bandwidth){f=c;break}}else if(c.scale)if(e.devicePixelRatio==c.scale){f=c;break}else{if(Math.round(e.devicePixelRatio)==c.scale){f=c;break}}else if(c.bandwidth){if(e.bandwidth===
c.bandwidth){f=c;break}}else f=c;f.scale||(f.scale=e.devicePixelRatio);f.bandwidth||(f.bandwidth=e.bandwidth);f.scaleRounded=Math.round(f.scale);a.appliedImageSetItem=f},B=function(a,b){b=a.parentElement;return b.clientWidth?!0:"inline"===t(b,"display")?B(b):!1},t=function(a,b,c){c||(c=b);return a.currentStyle?a.currentStyle[c]:h.defaultView.getComputedStyle(a,null).getPropertyValue(b)},o,N=function(a){for(var b="source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),
a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),c={},e=14;e--;)c[b[e]]=a[e]||"";c.queryKey={};c[b[12]].replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,e){b&&(c.queryKey[b]=e)});b=c.file.split(".");c.filename=b[0];c.ext=1<b.length?b[b.length-1]:"";return c},L=function(a){a=this;a.className=a.className.replace(x,y);a.srcModification="response-error";
a.hasError||a.src===a.defaultSrc||(a.hasError=!0,a.src=a.defaultSrc)},p=function(a,b){if("complete"!==k){k="complete";e.connTestResult=a;try{b||(b=J);var c={kbps:e.connKbps,bw:e.bandwidth,exp:(new Date).getTime()+6E4*b};localStorage.setItem("fsjs",JSON.stringify(c))}catch(f){}s()}},E=0,H=function(){E!==F()&&e.reload()},F=function(){return h.documentElement.clientWidth||h.body&&h.body.clientWidth||1024},I,O=function(){"complete"!==q||"complete"!==k||(A(),s())};e.resolve=function(a,b){b.imageSet=[];
z(b,a);C(b);D(b);b.src=G(b)};e.reload=function(){j.clearTimeout(I);I=j.setTimeout(O,250)};e.ready=function(){if(!h.body)return j.setTimeout(e.ready,1);q||(q="loading",A(),q="complete",s())};"complete"===h.readyState?setTimeout(e.ready,1):h.addEventListener?(h.addEventListener("DOMContentLoaded",e.ready,!1),j.addEventListener("load",e.ready,!1)):h.attachEvent&&(h.attachEvent("onreadystatechange",e.ready),j.attachEvent("onload",e.ready));e.devicePixelRatio=j.devicePixelRatio?j.devicePixelRatio:1;g.forcedPixelRatio&&
(e.devicePixelRatio=g.forcedPixelRatio);e.devicePixelRatioRounded=Math.round(e.devicePixelRatio);(function(){if(!k)if(g.forcedBandwidth){e.bandwidth=g.forcedBandwidth;e.connTestResult="forced";k="complete"}else if(e.devicePixelRatio===1){e.connTestResult="skip";k="complete"}else{var a=u.connection||{type:"unknown"},b=a.type==3||a.type==4||/^[23]g$/.test(a.type);e.connType=a.type;if(b){e.connTestResult="connTypeSlow";k="complete"}else{try{var c=JSON.parse(localStorage.getItem("fsjs"));if(c!==null&&
(new Date).getTime()<c.exp){e.bandwidth=c.bw;e.connKbps=c.kbps;e.connTestResult="localStorage";k="complete";return}}catch(f){}var a=h.createElement("img"),d,i;a.onload=function(){d=(new Date).getTime();var a=(d-i)/1E3;e.connKbps=w*8192/(a>1?a:1)/1024;e.bandwidth=e.connKbps>=v?"high":"low";p("networkSuccess")};a.onerror=function(){p("networkError",5)};a.onabort=function(){p("networkAbort",5)};i=(new Date).getTime();k="loading";h.location.protocol==="https:"&&(n=n.replace("http:","https:"));a.src=n+
"?r="+Math.random();setTimeout(function(){p("networkSlow")},w*8/v*1E3+350)}}})();j.addEventListener?j.addEventListener("resize",H,!1):j.attachEvent&&j.attachEvent("onresize",H)})(this.foresight=this.foresight||{},this,document,navigator);